
<style>
#head {font-weight:bold; display: inline-block; width:40px; border:2px solid rgba(0, 0, 0, 0); border-style: hidden solid hidden hidden; margin-left:10px;}
#comment {display: inline-block; margin-left:10px;
  background: #c0c0f0;
  border-radius: 6px;
  padding-left:6px;
  padding-right:6px;
  font-weight:bold;
  color:#202020;
}

#comment_bench {display: inline-block; margin-left:10px;
  background: #c0f0c0;
  border-radius: 6px;
  padding-left:6px;
  padding-right:6px;
  font-weight:bold;
  color:#202020;
}

#comment_verify {display: inline-block; margin-left:10px;
  background: #f0c0c0;
  border-radius: 6px;
  padding-left:6px;
  padding-right:6px;
  font-weight:bold;
  color:#202020;
}
.global { padding-left:14px;}
.group {border:2px solid #d0d0d0; border-radius:6px; padding-left:12px;}
#sig00 {padding-left:4px; background:#ffffff; display: inline-block; width:30px; border:1px solid transparent; border-left-color:#000; margin-left:10px;}
#sig01 {padding-left:4px; background:#d0d0d0; display: inline-block; width:30px; border:1px solid transparent; border-right-color:#000; border-top-color:#000; margin-left:10px;}
#sig10 {padding-left:4px; background:#ffffff; display: inline-block; width:30px; border:1px solid transparent; border-left-color:#000; border-top-color:#000; margin-left:10px;}
#sig11 {padding-left:4px; background:#d0d0d0; display: inline-block; width:30px; border:1px solid transparent; border-right-color:#000; margin-left:10px;}

</style>

<script>
class __ {
  constructor()
  {
    this.rising = true;
    this.falling = false;
    if (this.rising && this.falling)
      this.sig = ["clk", "ss", "sck", "mosi", "miso"];
    else
      this.sig = ["ss", "sck", "mosi", "miso"];
    this.last = {clk:0, ss:0, sck:0, miso:0, mosi:0};
    this.nested = 0;
    this.suppress = false;
  }
  heading()
  {
    for (var s of this.sig)
      document.write(`<div id='head'>${s}</div>`)
  }
  state(sig)
  {
    if (!this.falling)
      this.suppress = !(sig.clk && !this.last.clk);
    if (!this.suppress)
    {
      document.write("<br>");
      for (var s of this.sig)
        document.write(`<div id='sig${this.last[s]}${sig[s]}'>${sig[s]}</div>`);
    }
    this.last = sig;
  }
  blog(msg) { if (this.suppress) return; document.write("<br>"); this.log("comment_bench", msg) }
  vlog(msg) { this.log("comment_verify", msg) }
  slog(msg) { this.log("comment", msg) }
  tlog(msg) { this.log("comment", msg) }
  groupBegin(msg) { 
    if (this.nested++ == 0)
      document.write(`</div>`);
    document.write(`<div class='group'><input type='button' value='Collapse: ${msg}' onClick='_.collapse(this);'><br><div class='group_contents'>`); 
  }
  groupEnd() { document.write("</div></div>");
    if (--this.nested == 0)
      document.write("<div class='global'>");
  }
  log(cl, msg) { 
//   if (this.suppress) return; 
   msg = msg.split("<").join("&lt;").split(">").join("&gt;");
   document.write(`<div id='${cl}'>${msg}</div>`); 
  }

  collapse(el)
  {
    el = el.parentElement.querySelector(".group_contents"); 
    el.style.display = el.style.display == "none" ? "" : "none";
  }
}
var _ = new __();
document.write("<div class='global'>");
_.heading();
</script>

<script>
function print()
{

_.state({clk:1, ss:1, sck:1, miso:0, mosi:0});
_.state({clk:0, ss:1, sck:1, miso:0, mosi:0});
_.state({clk:1, ss:1, sck:1, miso:0, mosi:0});
_.state({clk:0, ss:1, sck:1, miso:0, mosi:0});
_.state({clk:1, ss:1, sck:1, miso:0, mosi:0});
_.state({clk:0, ss:1, sck:1, miso:0, mosi:0});
_.state({clk:1, ss:1, sck:1, miso:0, mosi:0});
_.state({clk:0, ss:1, sck:1, miso:0, mosi:0});_.vlog('Starting!');
_.state({clk:1, ss:1, sck:1, miso:0, mosi:0});
_.state({clk:0, ss:1, sck:1, miso:0, mosi:0});
_.state({clk:1, ss:1, sck:1, miso:0, mosi:0});
_.state({clk:0, ss:1, sck:1, miso:0, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:0});_.slog('<reset>');
_.state({clk:1, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:0});_.slog('QUEUE-A');
_.state({clk:1, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:0});_.slog('LOAD QUEUE');
_.state({clk:1, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:0});_.vlog('wr: 0x13 ');
_.groupBegin('Transfer 13');
_.blog('spi_tx: 13');
_.state({clk:1, ss:0, sck:0, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:0, miso:0, mosi:1});_.slog('step 0, rd:1, wr:0 wr-avail:1');_.slog('WRITE:0');_.slog('READ:1');
_.state({clk:1, ss:0, sck:0, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:0, miso:0, mosi:1});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:1, ss:0, sck:0, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:0, miso:0, mosi:1});_.slog('step 1, rd:1, wr:1 wr-avail:1');_.slog('WRITE:1');_.slog('READ:1');
_.state({clk:1, ss:0, sck:0, miso:1, mosi:1});
_.state({clk:0, ss:0, sck:0, miso:1, mosi:1});
_.state({clk:1, ss:0, sck:1, miso:1, mosi:1});
_.state({clk:0, ss:0, sck:1, miso:1, mosi:1});
_.state({clk:1, ss:0, sck:1, miso:1, mosi:1});
_.state({clk:0, ss:0, sck:1, miso:1, mosi:1});
_.state({clk:1, ss:0, sck:0, miso:1, mosi:0});
_.state({clk:0, ss:0, sck:0, miso:1, mosi:0});_.slog('step 2, rd:0, wr:1 wr-avail:1');_.slog('WRITE:1');_.slog('READ:0');
_.state({clk:1, ss:0, sck:0, miso:1, mosi:0});
_.state({clk:0, ss:0, sck:0, miso:1, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:1, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:1, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:1, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:1, mosi:0});
_.state({clk:1, ss:0, sck:0, miso:1, mosi:0});
_.state({clk:0, ss:0, sck:0, miso:1, mosi:0});_.slog('step 3, rd:0, wr:1 wr-avail:1');_.slog('WRITE:1');_.slog('READ:0');
_.state({clk:1, ss:0, sck:0, miso:1, mosi:0});
_.state({clk:0, ss:0, sck:0, miso:1, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:1, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:1, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:1, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:1, mosi:0});
_.state({clk:1, ss:0, sck:0, miso:1, mosi:1});
_.state({clk:0, ss:0, sck:0, miso:1, mosi:1});_.slog('step 4, rd:1, wr:0 wr-avail:1');_.slog('WRITE:0');_.slog('READ:1');
_.state({clk:1, ss:0, sck:0, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:0, miso:0, mosi:1});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:1, ss:0, sck:0, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:0, miso:0, mosi:0});_.slog('step 5, rd:0, wr:0 wr-avail:1');_.slog('WRITE:0');_.slog('READ:0');
_.state({clk:1, ss:0, sck:0, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:0, miso:0, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:1, ss:0, sck:0, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:0, miso:0, mosi:0});_.slog('step 6, rd:0, wr:1 wr-avail:1');_.slog('WRITE:1');_.slog('READ:0');
_.state({clk:1, ss:0, sck:0, miso:1, mosi:0});
_.state({clk:0, ss:0, sck:0, miso:1, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:1, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:1, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:1, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:1, mosi:0});
_.state({clk:1, ss:0, sck:0, miso:1, mosi:0});
_.state({clk:0, ss:0, sck:0, miso:1, mosi:0});_.slog('step 7, rd:0, wr:0 wr-avail:1');_.slog('WRITE:0');_.slog('READ:0');
_.state({clk:1, ss:0, sck:0, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:0, miso:0, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:0});_.blog('spi_rx: 4e');_.vlog('Received 4e');_.groupEnd();
_.vlog('rd: 0x4e ');_.vlog('wr: 0xab ');
_.groupBegin('Transfer ab');
_.blog('spi_tx: ab');
_.state({clk:1, ss:0, sck:0, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:0, miso:0, mosi:1});_.slog('step 0, rd:1, wr:0 wr-avail:1');_.slog('WRITE:0');_.slog('READ:1');
_.state({clk:1, ss:0, sck:0, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:0, miso:0, mosi:1});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:1, ss:0, sck:0, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:0, miso:0, mosi:1});_.slog('step 1, rd:1, wr:1 wr-avail:1');_.slog('WRITE:1');_.slog('READ:1');
_.state({clk:1, ss:0, sck:0, miso:1, mosi:1});
_.state({clk:0, ss:0, sck:0, miso:1, mosi:1});
_.state({clk:1, ss:0, sck:1, miso:1, mosi:1});
_.state({clk:0, ss:0, sck:1, miso:1, mosi:1});
_.state({clk:1, ss:0, sck:1, miso:1, mosi:1});
_.state({clk:0, ss:0, sck:1, miso:1, mosi:1});
_.state({clk:1, ss:0, sck:0, miso:1, mosi:0});
_.state({clk:0, ss:0, sck:0, miso:1, mosi:0});_.slog('step 2, rd:0, wr:1 wr-avail:1');_.slog('WRITE:1');_.slog('READ:0');
_.state({clk:1, ss:0, sck:0, miso:1, mosi:0});
_.state({clk:0, ss:0, sck:0, miso:1, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:1, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:1, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:1, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:1, mosi:0});
_.state({clk:1, ss:0, sck:0, miso:1, mosi:1});
_.state({clk:0, ss:0, sck:0, miso:1, mosi:1});_.slog('step 3, rd:1, wr:1 wr-avail:1');_.slog('WRITE:1');_.slog('READ:1');
_.state({clk:1, ss:0, sck:0, miso:1, mosi:1});
_.state({clk:0, ss:0, sck:0, miso:1, mosi:1});
_.state({clk:1, ss:0, sck:1, miso:1, mosi:1});
_.state({clk:0, ss:0, sck:1, miso:1, mosi:1});
_.state({clk:1, ss:0, sck:1, miso:1, mosi:1});
_.state({clk:0, ss:0, sck:1, miso:1, mosi:1});
_.state({clk:1, ss:0, sck:0, miso:1, mosi:0});
_.state({clk:0, ss:0, sck:0, miso:1, mosi:0});_.slog('step 4, rd:0, wr:0 wr-avail:1');_.slog('WRITE:0');_.slog('READ:0');
_.state({clk:1, ss:0, sck:0, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:0, miso:0, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:1, ss:0, sck:0, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:0, miso:0, mosi:1});_.slog('step 5, rd:1, wr:0 wr-avail:1');_.slog('WRITE:0');_.slog('READ:1');
_.state({clk:1, ss:0, sck:0, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:0, miso:0, mosi:1});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:1, ss:0, sck:0, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:0, miso:0, mosi:0});_.slog('step 6, rd:0, wr:1 wr-avail:1');_.slog('WRITE:1');_.slog('READ:0');
_.state({clk:1, ss:0, sck:0, miso:1, mosi:0});
_.state({clk:0, ss:0, sck:0, miso:1, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:1, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:1, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:1, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:1, mosi:0});
_.state({clk:1, ss:0, sck:0, miso:1, mosi:1});
_.state({clk:0, ss:0, sck:0, miso:1, mosi:1});_.slog('step 7, rd:1, wr:0 wr-avail:1');_.slog('WRITE:0');_.slog('READ:1');
_.state({clk:1, ss:0, sck:0, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:0, miso:0, mosi:1});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:1});_.blog('spi_rx: 4e');_.vlog('Received 4e');_.groupEnd();
_.vlog('rd: 0x4e ');_.vlog('wr: 0xcd ');
_.groupBegin('Transfer cd');
_.blog('spi_tx: cd');
_.state({clk:1, ss:0, sck:0, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:0, miso:0, mosi:1});_.slog('step 0, rd:1, wr:0 wr-avail:1');_.slog('WRITE:0');_.slog('READ:1');
_.state({clk:1, ss:0, sck:0, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:0, miso:0, mosi:1});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:1, ss:0, sck:0, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:0, miso:0, mosi:0});_.slog('step 1, rd:0, wr:1 wr-avail:1');_.slog('WRITE:1');_.slog('READ:0');
_.state({clk:1, ss:0, sck:0, miso:1, mosi:0});
_.state({clk:0, ss:0, sck:0, miso:1, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:1, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:1, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:1, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:1, mosi:0});
_.state({clk:1, ss:0, sck:0, miso:1, mosi:1});
_.state({clk:0, ss:0, sck:0, miso:1, mosi:1});_.slog('step 2, rd:1, wr:1 wr-avail:1');_.slog('WRITE:1');_.slog('READ:1');
_.state({clk:1, ss:0, sck:0, miso:1, mosi:1});
_.state({clk:0, ss:0, sck:0, miso:1, mosi:1});
_.state({clk:1, ss:0, sck:1, miso:1, mosi:1});
_.state({clk:0, ss:0, sck:1, miso:1, mosi:1});
_.state({clk:1, ss:0, sck:1, miso:1, mosi:1});
_.state({clk:0, ss:0, sck:1, miso:1, mosi:1});
_.state({clk:1, ss:0, sck:0, miso:1, mosi:1});
_.state({clk:0, ss:0, sck:0, miso:1, mosi:1});_.slog('step 3, rd:1, wr:1 wr-avail:1');_.slog('WRITE:1');_.slog('READ:1');
_.state({clk:1, ss:0, sck:0, miso:1, mosi:1});
_.state({clk:0, ss:0, sck:0, miso:1, mosi:1});
_.state({clk:1, ss:0, sck:1, miso:1, mosi:1});
_.state({clk:0, ss:0, sck:1, miso:1, mosi:1});
_.state({clk:1, ss:0, sck:1, miso:1, mosi:1});
_.state({clk:0, ss:0, sck:1, miso:1, mosi:1});
_.state({clk:1, ss:0, sck:0, miso:1, mosi:0});
_.state({clk:0, ss:0, sck:0, miso:1, mosi:0});_.slog('step 4, rd:0, wr:0 wr-avail:1');_.slog('WRITE:0');_.slog('READ:0');
_.state({clk:1, ss:0, sck:0, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:0, miso:0, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:1, ss:0, sck:0, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:0, miso:0, mosi:0});_.slog('step 5, rd:0, wr:0 wr-avail:1');_.slog('WRITE:0');_.slog('READ:0');
_.state({clk:1, ss:0, sck:0, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:0, miso:0, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:0});
_.state({clk:1, ss:0, sck:0, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:0, miso:0, mosi:1});_.slog('step 6, rd:1, wr:1 wr-avail:1');_.slog('WRITE:1');_.slog('READ:1');
_.state({clk:1, ss:0, sck:0, miso:1, mosi:1});
_.state({clk:0, ss:0, sck:0, miso:1, mosi:1});
_.state({clk:1, ss:0, sck:1, miso:1, mosi:1});
_.state({clk:0, ss:0, sck:1, miso:1, mosi:1});
_.state({clk:1, ss:0, sck:1, miso:1, mosi:1});
_.state({clk:0, ss:0, sck:1, miso:1, mosi:1});
_.state({clk:1, ss:0, sck:0, miso:1, mosi:1});
_.state({clk:0, ss:0, sck:0, miso:1, mosi:1});_.slog('step 7, rd:1, wr:0 wr-avail:1');_.slog('WRITE:0');_.slog('READ:1');
_.state({clk:1, ss:0, sck:0, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:0, miso:0, mosi:1});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:1});_.blog('spi_rx: 4e');_.vlog('Received 4e');_.groupEnd();
_.vlog('rd: 0x4e ');
_.state({clk:1, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:1, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:0, ss:0, sck:1, miso:0, mosi:1});
_.state({clk:1, ss:1, sck:1, miso:0, mosi:1});
_.state({clk:0, ss:1, sck:1, miso:0, mosi:1});
_.state({clk:1, ss:1, sck:1, miso:0, mosi:1});
_.state({clk:0, ss:1, sck:1, miso:0, mosi:1});
}
print();
</script>